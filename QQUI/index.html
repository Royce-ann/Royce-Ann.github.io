<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>QQ</title>

		<meta name="viewport" content="initial-scale=1, maximum-scale=1">

		<link rel="stylesheet" href="SUI/sm.min.css">
		<style>
			#btn-title {
				width: 40%;
				margin: 0 auto;
			}
			
			#msg-page,
			#ab-page,
			#dt-page {
				animation: none !important;
				-webkit-animation: none !important;
			}
			
			#self-head {
				width: 3rem;
				height: 3rem;
				border-radius: 50%;
				float: left;
			}
			
			#self-name {
				float: left;
			}
			
			#botton-menu {
				font-size: 0.6rem;
			}
			
			#aside-menu {
				height: 12rem;
				overflow-y: scroll;
			}
			
			#friend-list {
				margin: 0;
			}
			
			#friend-list .item-media img {
				border-radius: 50%;
			}
			
		</style>
	</head>

	<body>
		<div class="page-group">
			<!--消息页面-->
			<div class="page page-current" id="msg-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a class="icon icon-me pull-left open-panel" data-panel="#info-panel"></a>
					<button class="button button-link button-nav pull-right"><b>＋</b></button>
					<div id="btn-title" class="buttons-row">
						<a href="" class="tab-link active button">消息</a>
						<a href="" class="tab-link button">电话</a>
					</div>
				</header>

				<!--工具栏-->
				<nav class="bar bar-tab">
					<a class="tab-item active">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
						<span class="badge">99+</span>
					</a>
					<a class="tab-item" href="#ab-page">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a class="tab-item" href="#dt-page">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</nav>

				<!--搜索栏-->
				<div class="bar bar-header-secondary">
					<div class="searchbar">
						<a class="searchbar-cancel">取消</a>
						<div class="search-input">
							<label class="icon icon-search" for="search"></label>
							<input type="search" id='search' placeholder='输入关键字...' />
						</div>
					</div>
				</div>

				<!--正文-->
				<div class="content close-panel">
					<div class="list-block media-list" id="friend-list">
						<ul>
							<li>
								<div class="item-content">
									<div class="item-media"><img src="http://gqianniu.alicdn.com/bao/uploaded/i4//tfscom/i3/TB10LfcHFXXXXXKXpXXXXXXXXXX_!!0-item_pic.jpg_250x250q60.jpg" style='width: 2.2rem;'></div>
									<div class="item-inner">
										<div class="item-title-row">
											<div class="item-title">标题</div>
										</div>
										<div class="item-subtitle">子标题</div>
									</div>
								</div>
							</li>
							<li>
								<div class="item-content">
									<div class="item-media"><img src="http://gqianniu.alicdn.com/bao/uploaded/i4//tfscom/i3/TB10LfcHFXXXXXKXpXXXXXXXXXX_!!0-item_pic.jpg_250x250q60.jpg" style='width: 2.2rem;'></div>
									<div class="item-inner">
										<div class="item-title-row">
											<div class="item-title">标题</div>
										</div>
										<div class="item-subtitle">子标题</div>
									</div>
								</div>
							</li>
							<li>
								<div class="item-content">
									<div class="item-media"><img src="http://gqianniu.alicdn.com/bao/uploaded/i4//tfscom/i3/TB10LfcHFXXXXXKXpXXXXXXXXXX_!!0-item_pic.jpg_250x250q60.jpg" style='width: 2.2rem;'></div>
									<div class="item-inner">
										<div class="item-title-row">
											<div class="item-title">标题</div>
										</div>
										<div class="item-subtitle">子标题</div>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>

			<!--联系人页面-->
			<div class="page" id="ab-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a class="icon icon-me pull-left" href=""></a>
					<button class="button button-link button-nav pull-right">添加</button>
					<h1 class="title">联系人</h1>
				</header>
				<!--工具栏-->
				<nav class="bar bar-tab">
					<a class="tab-item" href="#msg-page">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
					</a>
					<a class="tab-item active">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a class="tab-item" href="#dt-page">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</nav>
				<!--正文-->
				<div class="content">
					<div class="list-block contacts-block">
						<div class="list-group">
							<ul>
								<li onclick="openclose(event)" class="list-group-title">A</li>
								<li>
									<div class="item-content">
										<div class="item-inner">
											<div class="item-title">标题1</div>
										</div>
									</div>
								</li>
								<li>
									<div class="item-content">
										<div class="item-inner">
											<div class="item-title">标题2</div>
										</div>
									</div>
								</li>
								<li>
									<div class="item-content">
										<div class="item-inner">
											<div class="item-title">标题3</div>
										</div>
									</div>
								</li>
								<li>
									<div class="item-content">
										<div class="item-inner">
											<div class="item-title">标题4</div>
										</div>
									</div>
								</li>

							</ul>
						</div>

					</div>
				</div>
			</div>

			<!--动态页面-->
			<div class="page" id="dt-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a class="icon icon-me pull-left" href=""></a>
					<button class="button button-link button-nav pull-right">更多</button>
					<h1 class="title">动态</h1>
				</header>
				<!--工具栏-->
				<nav class="bar bar-tab">
					<a class="tab-item" href="#msg-page">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
					</a>
					<a class="tab-item" href="#ab-page">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a class="tab-item active">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</nav>
				<!--正文-->
				<div class="content">
					<div class="content-block">
						这里是动态页面
					</div>
				</div>
			</div>

			<!--侧栏-->
			<div class="theme-white panel panel-left panel-reveal" id="info-panel">
				<div class="content-block">
					<!--个人信息-->
					<div id="self-info">
						<img id="self-head" src="SUI/img/cat.jpg" />
						<span id="self-name">我的昵称</span>
						<br />
						<div id="self-level"></div>
						<div style="clear: both;"></div>
						<p>今天捡了100块钱</p>
					</div>
					<!--菜单列表-->
					<div class="list-block" id="aside-menu">
						<ul>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-gift"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">了解会员特权</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-cart"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">QQ钱包</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-edit"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">个性装扮</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-star"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的收藏</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-picture"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的相册</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-computer"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的文件</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-card"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的名片夹</div>
								</div>
							</li>
						</ul>
					</div>

					<div class="row" id="botton-menu">
						<div class="col-33">
							<a href="" class="button-link"><i class="icon icon-settings"></i>设置</a>
						</div>
						<div class="col-33">
							<a id="night-shift-btn" class="button-link"><i class="icon icon-star"></i>夜间</a>
						</div>
						<div class="col-33">
							<a class="button-link">郑州<sup>18℃</sup></a>
						</div>
					</div>

				</div>
			</div>

		</div>
	</body>
	<script src="SUI/zepto.min.js"></script>
	<script src="SUI/sm.min.js"></script>

	<script>
		//URL中第一个#后面的字符串是url的哈希值(hash)。
		//哈希值不会随请求发送到服务器，仅仅是指导浏览器当页面
		//加载完成时显示页面的哪个部分。
		//window.location.hash可以访问当前页面的哈希值
		//window.onhashchange事件可以监听哈希值的变化。

		//		$(document).on('pageInit',function(e,pageId,$page){			
		//			switch(pageId){
		//				case 'msg-page':
		//					document.title = '消息';
		//					break;
		//				case 'ab-page':
		//					document.title = '联系人';
		//					break;
		//				case 'dt-page':
		//					document.title = '动态';
		//					break;
		//			}			
		//		});

		$(document).on('pageInit', '#msg-page', function(e, pageId, $page) {
			document.title = '消息';
		});
		$(document).on('pageInit', '#ab-page', function(e, pageId, $page) {
			document.title = '联系人';
		});
		$(document).on('pageInit', '#dt-page', function(e, pageId, $page) {
			document.title = '动态';
		});

		//侧栏中的QQ等级
		function refreshLevel(level) {
			var levArray = [];
			while(level / 4 >= 1) {
				var remainder = level % 4;
				levArray.unshift(remainder);
				level = Math.floor(level / 4);
			}
			levArray.unshift(level);
			console.log(levArray);

			//图片名字
			for(var i = 0; i < levArray.length; i++) {
				var picName;
				switch(levArray.length - i) {
					case 3:
						picName = 'sun.png';
						break;
					case 2:
						picName = 'moon.png';
						break;
					case 1:
						picName = 'star.png';
						break;
				}

				for(var j = 0; j < levArray[i]; j++) {
					$('<img/>')
						.attr('src', 'img/' + picName)
						.css('width', '0.8rem')
						.css('height', '0.8rem')
						.appendTo($('#self-level'));
				}
			}
		}
		refreshLevel(52);
		
		//夜间模式切换
		$('#night-shift-btn').click(function() {
			$(document.body).toggleClass('theme-dark');
			$('#info-panel').toggleClass('theme-white');
		});
		
		//控制联系人列表的打开和关闭
		function openclose(e){
			if(e.target.isOpen){
				$(e.target).nextAll('li')
				.css('display','none');
				e.target.isOpen = false;
			}else{
				$(e.target).nextAll('li')
				.css('display','block');
				e.target.isOpen = true;
			}
			
		}
		
		
		//初始化SUI
		$.init();
	</script>

</html>